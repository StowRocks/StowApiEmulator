pre-commit:
  parallel: true
  commands:
    prettier:
      glob: '*.{js,ts,tsx,json,md}'
      run: npx prettier --check {staged_files}
    eslint:
      glob: '*.{js,ts,tsx}'
      run: npx eslint {staged_files}
    tests:
      run: npm test

commit-msg:
  commands:
    commitlint:
      run: |
        commit_msg=$(cat {1})
        if ! echo "$commit_msg" | grep -qE "^(feat|fix|docs|style|refactor|perf|test|build|ci|chore|revert)(\(.+\))?: .{1,}"; then
          echo "‚ùå Commit message must follow Conventional Commits format:"
          echo "   <type>(<scope>): <subject>"
          echo ""
          echo "   Types: feat, fix, docs, style, refactor, perf, test, build, ci, chore, revert"
          echo ""
          echo "   Example: feat(api): add TMDB search endpoint"
          exit 1
        fi
